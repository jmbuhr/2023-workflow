---
title: "Sharpening the Axe"
subtitle: "Reproducible Data Analysis at the Speed of Thought"
abstract: |
  This talk is all about workflows and tools.
  We will learn about `Quarto`, the next iteration of Rmarkdown
  and integrate it into our workflow.
  We will see the `targets` R package in action to help us
  keep track of complicated analysis pipelines and produce
  verifiably reproducible results.
  Lastly, we will venture into uncharted territory to find
  out first hand, why it always pays off to learn the intricacies
  of your tools with a live demonstration of using `Quarto` and
  `targets` in `Neovim`.
date: December 19, 2023
author: Jannik Buhr
institute: Heidelberg Institute for Theoretical Studies
format:
  revealjs: 
    title-slide-attributes:
      data-background-image: ./img/hand-axe.png
    #   data-background-color: white
      data-background-size: contain
      data-background-position: left
    auto-animate-unmatched: false
    code-copy: true
    citations-hover: true
    reference-links: false
    progress: true
    slide-number: true
    chalkboard: 
      buttons: true
    multiplex: false
    theme: [default, theme.scss]
    css: ./styles.css
    footer: |
      <https://jmbuhr.de/2023-workflow>
# favicon: ./img/logo.png
bibliography: ./references.bib
nocite: ""
execute:
  warning: false
  eval: true
  echo: true
# engine: knitr
engine: markdown
---

# Welcome

::: {.notes}
- juggling
  - demo time
  - one pin
  - two pins
  - three pins
  - sports psychology: learning, overlearning
- demo: remembering things
  - random letters
  - same number of characters, but words in a sentence
  - bigger concepts in one thunk free up resources
:::

## Otters have a favorite Rock ðŸª¨

:::: {layout="[1,1]"}
![](./img/otter-hello.png)

:::{#quote}
![](./img/otter-pound.png){#otter-pound}

> "The mean number of **blows** necessary **to open a mussel** was **35.5** (range 6â€“88, sd 20.4).\
> The **same stone** was frequently **retained** for several successive food items, [...]"
> 
> --- @hallToolUsingBehaviorCalifornia1964
:::
Â 
::::

:::footer
Image sources: <https://en.wikipedia.org/wiki/Tool_use_by_sea_otters>, <https://en.wikipedia.org/wiki/Tool_use_by_sea_otters>
:::

## Otters have a favorite Rock ðŸª¨

> "Give me six hours to cut down a tree and I will spend the first four sharpening the axe."
> 
> --- Abraham Lincoln

## Otters have a favorite Rock ðŸª¨

> "Give me six minutes to open a mussel and I will spend the first four finding the perfect rock."
> 
> --- ~~Abraham~~ Otterham Lincoln

## Otters have a favorite Rock ðŸª¨


![](./img/pexels-anna-urlapova-2957058.jpg){.fl width=38%}

. . .

:::{#textbox}
**Humans** don't just **use** tools

We **shape** and **perfect** them.
:::

. . .

![](./img/hand-axe.png){.fr width=38%}


:::footer
Image sources: <https://www.pexels.com/photo/person-holding-a-stone-2957058/>, <https://en.wikipedia.org/wiki/Hand_axe>
:::

## Who am I? ðŸ¦¦

:::{#jannik .fr}
![](./img/jannik.png)
:::

Hi, I'm Jannik!

Computational Biochemist at HITS and Heidelberg University

![](./img/helix-wide.png){width=60%}

I love building and teaching tools.

:::profile
- \@jmbuhr
- [](https://github.com/jmbuhr){.bi-github}
- [](https://jmbuhr.de){.bi-house}
- [](https://mastodon.online/@jmbuhr){.bi-mastodon}
- [](https://www.youtube.com/@jmbuhr){.bi-youtube}
- [](https://www.linkedin.com/in/jmbuhr/){.bi-linkedin}
:::

{{< qrcode https://github.com/jmbuhr.de/2023-workflow qr width=124 height=124 colorDark='#1E4287' >}}

## The Tools Today ðŸ§°

::: {layout-ncol=3 #tool-logos}
![](./img/targets.png)

![](./img/Neovim-logo.svg)

![](./img/quarto.png)
:::


# Warmup!

## Remember these letters

```{r}
countdown::countdown(minutes = 0, seconds = 15)
```

xfw iadc na nvrqy bceawgj dcz lyh lwoovxxce

## Remember these letters

How many of these letters did you remember?

## Remember these letters

The quick brown fox jumps over the lazy dog

```{r}
countdown::countdown(minutes = 0, seconds = 15)
```

## Remember these letters

Do you remember the sentence on the previous slide?

. . .

Of course you do, it's just **one** sentence!

. . .

But it has the **same number of characters** as the random letters.

## Thunks


# Optimize Your Workflow

## Keyboard Shortcuts are not just for Speed!

Demo Time!

## Demo

Lorem ipsum dolor sit amet, officia excepteur ex fugiat reprehenderit enim labore culpa sint ad nisi Lorem pariatur mollit ex esse exercitation amet. Nisi anim cupidatat excepteur officia. Reprehenderit nostrud nostrud ipsum Lorem est aliquip amet voluptate voluptate dolor minim nulla est proident. Nostrud officia pariatur ut officia. Sit irure elit esse ea nulla sunt ex occaecat reprehenderit commodo officia dolor Lorem duis laboris cupidatat officia voluptate. Culpa proident adipisicing id nulla nisi laboris ex in Lorem sunt duis officia eiusmod. Aliqua reprehenderit commodo ex non excepteur duis sunt velit enim. Voluptate laboris sint cupidatat ullamco ut ea consectetur et est culpa et culpa duis.


# Optimize your Code

## Code is communication

## Put the fun in Functional Programming

### Pure Functions


# Thank You!

## Thank You!

## References

:::{#refs}
:::

# Targets

## Init

```{r}
library(targets)
library(tidyverse)
```

```{r}
#| eval: false
tar_script()
```

```{r}
#| eval: false
tar_make()
```

```{r}
tar_visnetwork(callr_arguments = list(show = FALSE))
```

## Work

```{r}
penguins <- tar_read(penguins)
```

```{r}
penguins |>
  DT::datatable()
```

## Work

```{r}
penguins <- tar_read(clean_penguins)
```

```{r}
penguins |>
  ggplot(aes(bill_length_cm, bill_depth_cm)) +
  geom_point(aes(color = species)) +
  theme_minimal()
```

## Work

```{r}
linear_model = lm(bill_length_cm ~ species, penguins)
anova_model = aov(bill_length_cm ~ species + sex, penguins)
summary(anova_model)
anova_model
TukeyHSD(anova_model)
```

## Work

```{r}
penguins |>
  filter(species != "Adelie") |>
  ggplot(aes(species, bill_length_cm, color = species, group = species)) +
  geom_violin() +
  ggbeeswarm::geom_quasirandom() +
  theme_minimal() +
  stat_summary(color = "black")
```

## Work

```{r}
penguins |>
  filter(species != "Adelie") |>
  (\(x) t.test(bill_length_cm ~ species, x))()
```

```{r}
penguins |>
  count(species, sex) |>
  drop_na()
```






